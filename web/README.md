# Web Deployment Directory

This directory contains web-deployable versions of AI modules using **Pygbag** (WebAssembly).

## Structure

```
web/
â”œâ”€â”€ index.html                 # Landing page for GitHub Pages
â”œâ”€â”€ STUDENT_ACCESS_GUIDE.md    # Instructions for students
â”œâ”€â”€ search/                    # Search module (web version)
â”‚   â”œâ”€â”€ main.py               # Async/await compatible main
â”‚   â”œâ”€â”€ config.py             # Configuration
â”‚   â”œâ”€â”€ core/                 # Core classes (state, env, algorithm)
â”‚   â”œâ”€â”€ algorithms/           # Search algorithms (BFS, DFS, etc.)
â”‚   â”œâ”€â”€ ui/                   # Visualization
â”‚   â”œâ”€â”€ heuristics.py         # Heuristic functions
â”‚   â””â”€â”€ build/                # Build output (generated by pygbag)
â”‚       â””â”€â”€ web/              # Production build
â”‚           â”œâ”€â”€ index.html
â”‚           â”œâ”€â”€ search.apk    # Packaged app + data
â”‚           â””â”€â”€ favicon.png
â””â”€â”€ [future modules]/          # MDP, RL, ML, GenAI
```

## How It Works

1. **Source code** in `web/search/` (adapted from `modules/search/`)
2. **Pygbag** converts Python â†’ WebAssembly
3. **Build output** in `build/web/`
4. **Deploy** to GitHub Pages
5. **Students access** via browser (no installation!)

## Key Differences from Desktop Version

### Import Statements
```python
# Desktop version:
from modules.search.core.environment import Maze

# Web version:
from core.environment import Maze
```

### Main Function
```python
# Desktop version:
def main():
    app = SearchApp()
    while app.running:
        # ... loop ...

# Web version:
async def main():  # Async!
    app = SearchApp()
    while app.running:
        # ... loop ...
        await asyncio.sleep(0)  # REQUIRED for browser

asyncio.run(main())  # Use asyncio
```

### Timing
```python
# Desktop: time.sleep()
time.sleep(0.01)

# Web: Time-based updates
current_time = pygame.time.get_ticks() / 1000.0
if current_time - last_update >= interval:
    update()
```

## Building for Web

### Option 1: Using Deployment Script (Recommended)

```bash
# From project root
./scripts/deploy_web.sh
```

### Option 2: Manual Build

```bash
# Navigate to module
cd web/search

# Build for production
pygbag --build main.py

# Output: build/web/
```

### Option 3: Test with Dev Server

```bash
cd web/search

# Run dev server (auto-opens browser)
pygbag main.py

# Opens: http://localhost:8000
```

## Deploying to GitHub Pages

### Manual Deployment

```bash
# 1. Build production version
cd web/search
pygbag --build main.py

# 2. Switch to gh-pages branch (create if doesn't exist)
git checkout gh-pages || git checkout --orphan gh-pages

# 3. Copy build files
mkdir -p search
cp -r web/search/build/web/* search/
cp web/index.html .

# 4. Commit and push
git add .
git commit -m "Deploy search module to web"
git push origin gh-pages

# 5. Enable GitHub Pages in repo settings
# Settings â†’ Pages â†’ Source: gh-pages branch

# 6. Access at:
# https://YOUR-USERNAME.github.io/intro-ai/
```

### Automated Deployment

GitHub Actions workflow is configured in `.github/workflows/deploy-search-module.yml`

**Triggers automatically when:**
- You push to `main` branch
- Files in `modules/search/` or `web/search/` change

**What it does:**
1. Installs pygbag
2. Builds web version
3. Deploys to GitHub Pages
4. Updates live site in 1-2 minutes

**To enable:**
- Workflow file is already in repo
- Just push to main - it will auto-deploy!

## File Size Considerations

**Build output (~8-12 MB):**
- Python runtime (WASM): ~6 MB
- Pygame library (WASM): ~2 MB
- Your code + data: ~100 KB

**GitHub Pages limits:**
- 1 GB total repository size
- 100 GB bandwidth/month (soft limit)
- Plenty for educational use!

**First load:** 10-20 seconds (downloading)
**Subsequent loads:** 2-3 seconds (cached)

## Testing Locally

```bash
# After building
cd web/search/build/web
python3 -m http.server 8000

# Open browser to:
# http://localhost:8000
```

## Troubleshooting

### Build Fails

**Check:**
- Is `main.py` async/await compatible?
- Are all imports using relative paths (no `modules.search.`)?
- Do all required files exist?

### App Doesn't Load in Browser

**Check:**
- Browser console for errors (F12)
- Try different browser
- Clear cache and reload

### Performance Issues

**Try:**
- Reduce maze size in config.py
- Reduce FPS (30 instead of 60)
- Test on desktop (better than mobile)

## Updating Deployed Version

```bash
# 1. Make changes to modules/search/
# (edit your code)

# 2. Copy to web/search/
cp -r modules/search/{config.py,core,algorithms,ui,heuristics.py} web/search/

# 3. Fix imports (if needed)
cd web/search
find . -name "*.py" -exec sed -i.bak 's/from modules\.search\./from /g' {} \;
rm -f **/*.bak

# 4. Build
pygbag --build main.py

# 5. Deploy
# (push to main for auto-deploy, or manually update gh-pages)
```

## Browser Compatibility

**Tested and working:**
- Chrome 90+ âœ…
- Firefox 88+ âœ…
- Safari 15+ (iOS and macOS) âœ…
- Edge 90+ âœ…

**Known issues:**
- Old browsers may not support WebAssembly
- Some mobile browsers may have performance issues
- Safari < 15 has limited WebAssembly support

## Performance Expectations

**Desktop browsers:** 30-60 FPS (smooth)
**Tablets:** 20-40 FPS (good)
**Phones:** 15-30 FPS (playable)

**Maze rendering:**
- Small mazes (20x15): Excellent on all devices
- Medium mazes (40x30): Good on desktop, OK on mobile
- Large mazes (60x40): Desktop only

## Cost

**Total cost: $0** ðŸŽ‰

- Pygbag: Free (open source)
- GitHub Pages: Free (for public repos)
- GitHub Actions: 2000 free minutes/month (plenty!)
- Custom domain: Optional (~$12/year if desired)

## Next Modules

Once search module is deployed and working:

**Deploy in this order:**
1. âœ… Search (simplest, done first)
2. MDP (moderate complexity)
3. RL (most complex due to real-time training)
4. ML (moderate, visualization heavy)
5. GenAI (moderate, text generation)

Each subsequent module deployment takes 1-2 hours (process is familiar).

---

**Deployment Status:**
- âœ… Search Module: READY FOR WEB
- ðŸ“‹ MDP Module: Code ready, needs web adaptation
- ðŸ“‹ RL Module: Code ready, needs web adaptation
- ðŸ“‹ ML Module: Documented, needs implementation
- ðŸ“‹ GenAI Module: Documented, needs implementation

---

**For detailed deployment instructions, see:**
- `docs/PYGBAG_WEB_DEPLOYMENT_PLAN.md` (step-by-step guide)
- `docs/DEPLOYMENT_OPTIONS.md` (platform comparison)
